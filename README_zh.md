ai-model-token-calculate
=========================

这是一个使用 Go 编写的命令行工具，用于分析 OpenAI 模型的 token 使用情况，支持以下功能：

- 文本或文件的 token 计数
- 将 token 解码回原始字符串
- 根据模型价格估算 token 成本
- 支持分析目录中多个文本文件（批量处理）
- 使用 Cobra 实现子命令结构，方便扩展和维护

----------------------------------------
功能列表
----------------------------------------

命令：

  tokenize   - 从文本或文件中统计 token 数量
  decode     - 将 token 序列解码为字符串
  cost       - 基于 token 数量和模型单价估算费用
  analyze    - 分析目录中所有 `.txt` 文件的 token 使用情况与成本

----------------------------------------
安装与使用
----------------------------------------

1. 克隆项目：

   git clone https://github.com/yourname/ai-model-token-calculate.git
   cd ai-model-token-calculate

2. 安装依赖：

   go mod tidy

3. 构建 CLI 工具：

   go build -o tokencli

----------------------------------------
使用示例
----------------------------------------

1. 统计文件中的 token 数量：

   ./tokencli tokenize -f input.txt -m gpt-4o -v

2. 通过标准输入统计 token：

   echo "你好，世界！" | ./tokencli tokenize -m gpt-3.5

3. 解码 token 序列：

   ./tokencli decode -t "1212,402,98" -m gpt-4

4. 估算 token 成本：

   ./tokencli cost -f input.txt -m gpt-4o

5. 分析目录内所有 .txt 文件：

   ./tokencli analyze -d ./docs -m gpt-3.5

----------------------------------------
支持的模型与价格（每 1000 token）
----------------------------------------

模型:         gpt-4o  
编码器:       cl100k_base  
输入价格:     $0.000005  
输出价格:     $0.000015  

模型:         gpt-4  
编码器:       cl100k_base  
输入价格:     $0.00003  
输出价格:     $0.00006  

模型:         gpt-3.5-turbo  
编码器:       cl100k_base  
输入价格:     $0.0005  
输出价格:     $0.0015  

----------------------------------------
测试
----------------------------------------

运行所有测试用例：

   go test ./test/...

----------------------------------------
项目结构
----------------------------------------

.
├── cmd          - CLI 命令逻辑实现
├── tokenizer    - Token 编码与解码逻辑
├── util         - 工具函数（如读取文件）
├── test         - 单元测试
├── main.go
└── README.txt

----------------------------------------
许可证
----------------------------------------

MIT

